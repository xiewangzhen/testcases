<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Case Portfolio | Liu Xuanyi</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.6/viewer.min.css">

    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --primary-color: #38bdf8;
            --secondary-color: #818cf8;
            --text-main: #f1f5f9;
            --text-sub: #94a3b8;
            --border-color: #334155;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- Header --- */
        header {
            text-align: center;
            padding: 3rem 1rem;
            background: radial-gradient(circle at top, #1e293b 0%, #0f172a 100%);
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            font-size: 2.2rem;
            margin: 0 0 0.5rem 0;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: var(--text-sub);
            font-size: 1rem;
        }

        /* --- Breadcrumb Navigation --- */
        .breadcrumb-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            width: 100%;
            box-sizing: border-box;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: var(--text-sub);
        }

        .breadcrumb span {
            cursor: pointer;
            transition: color 0.2s;
        }

        .breadcrumb span:hover {
            color: var(--primary-color);
        }

        .breadcrumb .separator {
            margin: 0 0.5rem;
            color: #475569;
            cursor: default;
        }

        .breadcrumb .current {
            color: var(--primary-color);
            font-weight: 600;
            cursor: default;
        }

        /* --- Main Layout --- */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem 4rem 2rem;
            width: 100%;
            box-sizing: border-box;
            flex-grow: 1;
        }

        /* View Section Logic */
        .view-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .view-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 1rem;
        }

        /* --- Category Cards --- */
        .category-card {
            background: linear-gradient(145deg, #1e293b, #162032);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .category-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
            box-shadow: 0 10px 30px rgba(56, 189, 248, 0.15);
        }

        .cat-icon { font-size: 3rem; margin-bottom: 1rem; display: inline-block; }
        .cat-title { font-size: 1.5rem; font-weight: 700; color: var(--text-main); margin-bottom: 0.5rem; }
        .cat-desc { color: var(--text-sub); font-size: 0.95rem; }
        .cat-count { position: absolute; top: 1rem; right: 1rem; background: rgba(56, 189, 248, 0.1); color: var(--primary-color); padding: 2px 10px; border-radius: 10px; font-size: 0.8rem; }

        /* --- Item Cards --- */
        .item-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
        }

        .item-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
        }

        .preview-box {
            height: 180px;
            background-color: #334155;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            cursor: zoom-in; /* é¼ æ ‡å˜æˆæ”¾å¤§é•œ */
            position: relative;
        }

        .preview-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s;
        }

        /* ç»™é¢„è§ˆå›¾åŠ ä¸€ä¸ªé®ç½©æç¤º */
        .preview-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .preview-box:hover .preview-overlay { opacity: 1; }
        .preview-overlay span {
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            backdrop-filter: blur(4px);
        }

        .card-body { padding: 1.5rem; display: flex; flex-direction: column; flex-grow: 1; }
        .card-title { margin: 0 0 0.5rem 0; font-size: 1.2rem; }
        .card-text { color: var(--text-sub); font-size: 0.9rem; margin-bottom: 1.5rem; flex-grow: 1; }
        
        .btn-group { display: flex; gap: 10px; }
        .btn { flex: 1; padding: 0.6rem; text-align: center; border-radius: 6px; text-decoration: none; font-size: 0.9rem; cursor: pointer; border: none; transition: background 0.2s; font-weight: 500; }
        .btn-primary { background: var(--primary-color); color: #0f172a; }
        .btn-primary:hover { background: #7dd3fc; }
        .btn-outline { border: 1px solid #475569; color: var(--text-main); display: flex; align-items: center; justify-content: center; }
        .btn-outline:hover { background: #334155; }

        /* Viewer.js å®šåˆ¶æ ·å¼ */
        .viewer-backdrop { background-color: rgba(15, 23, 42, 0.95) !important; }
        .viewer-title { color: #ccc; }
    </style>
</head>
<body>

    <header>
        <h1>Liu Xuanyi's Portfolio</h1>
        <p class="subtitle">æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆ Â· Test Case Design & Architecture</p>
    </header>

    <div class="breadcrumb-container">
        <div class="breadcrumb" id="breadcrumb-nav">
            <span class="current">é¦–é¡µ Home</span>
        </div>
    </div>

    <main>
        <section id="view-home" class="view-section active">
            <div class="grid">
                <div class="category-card" onclick="navigateTo('business')">
                    <span class="cat-count">3 items</span>
                    <div class="cat-icon">ğŸ¢</div>
                    <div class="cat-title">ä¸šåŠ¡åŠŸèƒ½æµ‹è¯•</div>
                    <div class="cat-desc">ç™»å½•ã€è´­ç‰©è½¦ã€æœç´¢ç­‰æ ¸å¿ƒä¸šåŠ¡æ¨¡å—çš„åŠŸèƒ½è¦†ç›–ã€‚</div>
                </div>

                <div class="category-card" onclick="navigateTo('scenario')">
                    <span class="cat-count">2 items</span>
                    <div class="cat-icon">ğŸ’¥</div>
                    <div class="cat-title">å¼‚å¸¸åœºæ™¯æµ‹è¯•</div>
                    <div class="cat-desc">æ”¯ä»˜ä¸­æ–­ã€å¼±ç½‘ã€é«˜å¹¶å‘ç­‰å¥å£®æ€§æµ‹è¯•ã€‚</div>
                </div>

                <div class="category-card" onclick="navigateTo('framework')">
                    <span class="cat-count">1 item</span>
                    <div class="cat-icon">ğŸ› ï¸</div>
                    <div class="cat-title">æµ‹è¯•æ¶æ„ & å·¥å…·</div>
                    <div class="cat-desc">æ¥å£è‡ªåŠ¨åŒ–æ¡†æ¶è®¾è®¡ã€æµæ°´çº¿é…ç½®ã€‚</div>
                </div>
            </div>
        </section>

        <section id="view-business" class="view-section">
            <div class="grid">
                <article class="item-card">
                    <div class="preview-box" onclick="viewImage(this)">
                        <img src="assets/images/login-case.png" alt="ç”¨æˆ·ç™»å½•æ¨¡å—æµ‹è¯•ç”¨ä¾‹">
                        <div class="preview-overlay"><span>ğŸ” ç‚¹å‡»æ”¾å¤§é¢„è§ˆ</span></div>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">ç”¨æˆ·ç™»å½•æ¨¡å—</h3>
                        <p class="card-text">è¦†ç›–SSOå•ç‚¹ç™»å½•ã€OAuth2.0æˆæƒã€å¤šç«¯äº’è¸¢æœºåˆ¶åŠå¼‚å¸¸è¾“å…¥æ ¡éªŒã€‚</p>
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="triggerImgClick(this)">é¢„è§ˆè„‘å›¾</button>
                            <a href="assets/files/login.xmind" class="btn btn-outline" download>ä¸‹è½½ Xmind</a>
                        </div>
                    </div>
                </article>

                </div>
        </section>

        <section id="view-scenario" class="view-section">
            <div class="grid">
                <article class="item-card">
                    <div class="preview-box" onclick="viewImage(this)">
                        <img src="assets/images/payment-case.png" alt="è®¢å•æ”¯ä»˜å¼‚å¸¸æµåˆ†æ">
                        <div class="preview-overlay"><span>ğŸ” ç‚¹å‡»æ”¾å¤§é¢„è§ˆ</span></div>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">è®¢å•æ”¯ä»˜å¼‚å¸¸æµ</h3>
                        <p class="card-text">ç¬¬ä¸‰æ–¹å›è°ƒå»¶è¿Ÿã€é‡å¤å›è°ƒå¹‚ç­‰æ€§æ ¡éªŒã€é‡‘é¢ç¯¡æ”¹æ”»é˜²æµ‹è¯•ã€‚</p>
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="triggerImgClick(this)">é¢„è§ˆè„‘å›¾</button>
                            <a href="assets/files/payment.xmind" class="btn btn-outline" download>ä¸‹è½½ Xmind</a>
                        </div>
                    </div>
                </article>
            </div>
        </section>

        <section id="view-framework" class="view-section">
            <div class="grid">
                <article class="item-card">
                    <div class="preview-box" onclick="viewImage(this)">
                        <img src="assets/images/api-framework.png" alt="APIè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶è®¾è®¡">
                        <div class="preview-overlay"><span>ğŸ” ç‚¹å‡»æ”¾å¤§é¢„è§ˆ</span></div>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">API è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶</h3>
                        <p class="card-text">åŸºäº Pytest + Allure + Requests çš„åˆ†å±‚è®¾è®¡ï¼Œå®ç°æ•°æ®é©±åŠ¨æµ‹è¯•ã€‚</p>
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="triggerImgClick(this)">é¢„è§ˆæ¶æ„</button>
                            <a href="assets/files/framework.xmind" class="btn btn-outline" download>ä¸‹è½½ Xmind</a>
                        </div>
                    </div>
                </article>
            </div>
        </section>

    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.6/viewer.min.js"></script>

    <script>
        // --- è§†å›¾å¯¼èˆªé€»è¾‘ (ä¿æŒä¸å˜) ---
        const viewTitles = {
            'home': 'é¦–é¡µ Home',
            'business': 'ä¸šåŠ¡åŠŸèƒ½æµ‹è¯• Business',
            'scenario': 'å¼‚å¸¸åœºæ™¯æµ‹è¯• Scenario',
            'framework': 'æ¶æ„è®¾è®¡ Architecture'
        };

        function navigateTo(viewId) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            const target = document.getElementById('view-' + viewId);
            if (target) target.classList.add('active');
            updateBreadcrumb(viewId);
            if (!history.state || history.state.view !== viewId) {
                history.pushState({ view: viewId }, null, `?view=${viewId}`);
            }
            window.scrollTo(0, 0);
        }

        function updateBreadcrumb(viewId) {
            const nav = document.getElementById('breadcrumb-nav');
            if (viewId === 'home') {
                nav.innerHTML = `<span class="current">é¦–é¡µ Home</span>`;
            } else {
                nav.innerHTML = `<span onclick="navigateTo('home')">é¦–é¡µ Home</span><span class="separator">/</span><span class="current">${viewTitles[viewId] || 'Details'}</span>`;
            }
        }

        window.addEventListener('popstate', (event) => {
            if (event.state && event.state.view) {
                navigateTo(event.state.view); // è¿™é‡Œéœ€è¦ä¿®æ”¹navigateToé¿å…æ­»å¾ªç¯pushStateï¼Œä½†ç®€åŒ–èµ·è§ï¼Œç›´æ¥å¤ç”¨æ˜¾ç¤ºé€»è¾‘
                // ç®€å•çš„å¤ç”¨æ¢å¤é€»è¾‘ï¼š
                document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
                const target = document.getElementById('view-' + event.state.view);
                if(target) target.classList.add('active');
                updateBreadcrumb(event.state.view);
            } else {
                // å›é¦–é¡µ
                document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
                document.getElementById('view-home').classList.add('active');
                updateBreadcrumb('home');
            }
        });

        // --- 3. æ ¸å¿ƒï¼šViewer.js å›¾ç‰‡æŸ¥çœ‹é€»è¾‘ ---
        
        // è¾…åŠ©ï¼šæŒ‰é’®ç‚¹å‡»æ—¶è§¦å‘å›¾ç‰‡çš„ç‚¹å‡»
        function triggerImgClick(btn) {
            // æ‰¾åˆ°åŒä¸ªå¡ç‰‡å†…çš„å›¾ç‰‡å®¹å™¨ç‚¹å‡»
            const card = btn.closest('.item-card');
            const imgBox = card.querySelector('.preview-box');
            viewImage(imgBox);
        }

        function viewImage(element) {
            const img = element.querySelector('img');
            
            // å®ä¾‹åŒ– Viewer (å•æ¬¡æ¨¡å¼)
            const viewer = new Viewer(img, {
                navbar: false,       // åªæœ‰ä¸€å¼ å›¾ï¼Œä¸éœ€è¦åº•éƒ¨ç¼©ç•¥å›¾å¯¼èˆª
                toolbar: {           // è‡ªå®šä¹‰å·¥å…·æ 
                    zoomIn: 1,
                    zoomOut: 1,
                    oneToOne: 1,     // 1:1 åŸå›¾æ¯”ä¾‹
                    reset: 1,
                    rotateLeft: 1,   // æ—‹è½¬åŠŸèƒ½ (å¯¹è„‘å›¾å¾ˆæœ‰ç”¨)
                    flipHorizontal: 1,
                    play: 0          // ä¸éœ€è¦æ’­æ”¾å¹»ç¯ç‰‡
                },
                title: true,         // æ˜¾ç¤ºå›¾ç‰‡çš„ alt å±æ€§ä½œä¸ºæ ‡é¢˜
                className: 'custom-viewer', // æ–¹ä¾¿è‡ªå®šä¹‰CSS
                
                // ç›‘å¬éšè—äº‹ä»¶ï¼šé”€æ¯å®ä¾‹ï¼Œæ¸…ç†å†…å­˜
                hidden: function () {
                    viewer.destroy();
                }
            });

            viewer.show();
        }

        // åˆå§‹åŒ–
        const urlParams = new URLSearchParams(window.location.search);
        const initialView = urlParams.get('view') || 'home';
        
        // å¦‚æœåˆå§‹å°±åœ¨å­é¡µé¢ï¼Œæ‰‹åŠ¨è§¦å‘ä¸€ä¸‹å¯¼èˆªUIæ›´æ–°
        if(initialView !== 'home') {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            const target = document.getElementById('view-' + initialView);
            if(target) target.classList.add('active');
            updateBreadcrumb(initialView);
        }

    </script>
</body>
</html>